'use strict';

/**
 * creates gRPC client with address passed in
 * uses `grpc.credentials.createInsecure`
 *
 * @param {string} address `<host>:<port>`
 */
module.exports.createGRPCClient = function(address) {
  /**
   * only require these when we create the GRPC Client
   * this is because grpc is optional and it is both directly required
   * and indirectly required in `service_api_grpc_pb.js`
   */
  const { ContrastClient } = require('./protobuf/service_api_grpc_pb.js');
  const grpc = require('grpc');
  return new ContrastClient(address, grpc.credentials.createInsecure());
};
